我已为您规划好为 XBK（校本课）板块增加“年级”字段的完整方案。

## 1. 数据库与后端修改 (Backend)

### 1.1 修改数据模型
在 `backend/app/models/xbk/course.py` 中的 `XbkCourse` 模型添加 `grade` 字段：
```python
class XbkCourse(Base):
    # ... 现有字段 ...
    grade = Column(String(50), nullable=True, comment="适用年级")  # 新增字段
```

### 1.2 生成数据库迁移 (Migration)
我们将使用 Alembic 自动生成迁移脚本，确保数据库结构变更安全可控：
- 运行命令：`alembic revision --autogenerate -m "add grade to xbk course"`
- 这将创建一个新的迁移文件在 `backend/alembic/versions/` 目录下。

### 1.3 更新数据验证 Schema
在 `backend/app/schemas/xbk/data.py` 中更新 Pydantic 模型，确保 API 能正确接收和返回该字段：
- `XbkCourseOut`: 增加 `grade: Optional[str] = None`
- `XbkCourseUpsert`: 增加 `grade: Optional[str] = None`

## 2. 前端修改 (Frontend)

### 2.1 更新类型定义
在 `frontend/src/services/xbk/data.ts`（或相关类型定义文件）中，为 `XbkCourse` 接口添加 `grade?: string` 字段。

### 2.2 更新课程列表 (Table)
在 `frontend/src/pages/Xbk/index.tsx` 的 `courseColumns` 配置中添加一列：
- **标题**: "年级"
- **数据索引**: `grade`
- **位置**: 建议放在“课程名称”之后或“限报人数”之前。

### 2.3 更新编辑/新增表单 (Form)
在 `frontend/src/pages/Xbk/index.tsx` 的编辑模态框（Modal）中添加输入控件：
- **标签**: "适用年级"
- **控件**: `Input`（文本输入）或 `Select`（下拉选择，如果年级是固定的）。建议先使用 `Input` 以保持灵活性。

## 3. 执行步骤
待您确认后，我将按以下顺序执行：
1.  修改后端模型与 Schema。
2.  生成并应用数据库迁移。
3.  更新前端类型、表格列和表单项。
4.  重启后端服务（如果需要）并验证功能。
