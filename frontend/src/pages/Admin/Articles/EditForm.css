.article-edit-form {
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden; /* Prevent scroll on the main container */
}

/* Ensure the Form takes full height */
.article-edit-form > .ant-form {
  height: 100%;
  display: flex;
  flex-direction: column;
  min-height: 0; /* Crucial for nested flex containers */
}

/* When in editor layout, remove bottom padding */
.article-edit-form.is-editor-layout {
  padding-bottom: 0;
}

/* Grid Layout for Editor Mode */
.article-edit-editor-grid {
  display: grid;
  grid-template-columns: 320px 1fr;
  grid-template-rows: 1fr; /* Explicitly 1fr height */
  gap: 16px;
  height: 100%;
  min-height: 0; /* Prevent overflow */
  overflow: hidden; /* Ensure content scrolls inside cards */
}

/* Sidebar */
.article-edit-editor-side {
  display: flex;
  flex-direction: column;
  gap: 16px;
  overflow-y: auto; /* Allow sidebar scrolling if needed */
  padding-right: 4px; /* Space for scrollbar */
}

/* Main Content Area */
.article-edit-editor-main {
  display: flex;
  flex-direction: column;
  gap: 16px;
  height: 100%;
  min-height: 0;
  overflow: hidden;
}

/* Content Card Container */
.article-edit-content-card {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

/* Card Body - The Critical Middle Layer */
.article-edit-content-card > .ant-card-body {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  padding: 0 !important; /* Reset padding for full control */
  overflow: hidden;
}

/* Content Row */
.article-edit-content-row {
  flex: 1;
  display: flex;
  flex-direction: row; /* Ensure row direction */
  min-height: 0;
  height: 100%; /* Force height */
}

/* Content Column */
.article-edit-content-row > .ant-col {
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0;
}

/* Editor Panel */
.article-edit-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  height: 100%;
  overflow: hidden;
}

/* Inner Editor Card */
.article-editor-card {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
  height: 100%;
  border: none !important; /* Optional: remove border inside panel */
}

.article-editor-card > .ant-card-body {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  padding: 0 !important;
  overflow: hidden;
}

/* Editor Body (Toolbar below) */
.article-editor-body {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  padding: 12px;
  overflow: hidden;
  background: var(--ws-color-surface);
}

/* 
 * The Deep Flex Chain for Form.Item 
 * We must target Antd internals to pass height down 
 */

/* 1. Form Item */
.article-editor-body .ant-form-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  margin-bottom: 0;
}

/* 2. Form Item Row (Antd wraps content in a row) */
.article-editor-body .ant-form-item .ant-row {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

/* 3. Form Item Control (The column containing the input) */
.article-editor-body .ant-form-item .ant-col.ant-form-item-control {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

/* 4. Form Item Control Input (Wrapper around input) */
.article-editor-body .ant-form-item .ant-form-item-control-input {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

/* 5. Form Item Control Input Content (Direct parent of Input) */
.article-editor-body .ant-form-item .ant-form-item-control-input-content {
  flex: 1;
  display: flex;
  flex-direction: column; /* Changed to column to handle showCount */
  min-height: 0;
  height: 100%;
}

/* 
 * TextArea Specifics 
 */

/* The Wrapper (ant-input-affix-wrapper) - usually a span */
.article-editor-textarea.ant-input-affix-wrapper {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
  height: 100% !important;
  padding: 0; /* Let textarea handle padding */
  border: 1px solid #d9d9d9; /* Re-apply border if lost */
  border-radius: 8px;
}

/* The actual Textarea element */
.article-editor-textarea textarea.ant-input {
  flex: 1;
  min-height: 0;
  height: 100% !important;
  resize: none;
  border: none; /* Wrapper has border */
  padding: 12px;
  box-shadow: none !important; /* Remove focus shadow on textarea, wrapper handles it */
}

/* If showCount is used, position the count nicely */
.article-editor-textarea .ant-input-data-count {
  text-align: right;
  padding: 4px 12px;
  font-size: 12px;
  color: rgba(0, 0, 0, 0.45);
  background: #fff;
  border-top: 1px solid #f0f0f0;
}

/* Responsive adjustments */
@media (max-width: 1200px) {
  .article-edit-editor-grid {
    grid-template-columns: 1fr;
    grid-template-rows: auto 1fr; /* Sidebar auto height, Main 1fr */
    overflow-y: auto; /* Allow full page scroll on smaller screens */
  }

  .article-edit-editor-side {
    height: auto;
    overflow: visible;
  }
  
  .article-edit-editor-main {
    height: auto;
    min-height: 500px; /* Minimum height for editor */
  }
}
